# -*- coding: utf-8 -*-
import math
import random as rnd

FPS = 30
#параметры экрана
WIDTH = 800
HEIGHT = 600
#параметры игры
bullet_speed = 10
bullet_radius = 2
tank_speed = 3
round_time = 10
time_speed = 1
#количество танков ии
AI_tanks_numbers = 100
#массив пуль
bullets = []
for i in range(AI_tanks_numbers):
    bullets.append([])
#ландшафт(стены)
walls = [[0, 0], [780, 0], [0, 580], [780, 580], [0, 0], [780, 0], [0, 580], [780, 580], [0, 0], [780, 0], [0, 580], [780, 580], [0, 20], [780, 20], [0, 560], [780, 560], [0, 40], [780, 40], [0, 540], [780, 540], [0, 60], [780, 60], [0, 520], [780, 520], [0, 60], [780, 60], [0, 520], [780, 520], [0, 60], [780, 60], [0, 520], [780, 520], [0, 80], [780, 80], [0, 500], [780, 500], [0, 80], [780, 80], [0, 500], [780, 500], [0, 80], [780, 80], [0, 500], [780, 500], [0, 80], [780, 80], [0, 500], [780, 500], [0, 80], [780, 80], [0, 500], [780, 500], [0, 80], [780, 80], [0, 500], [780, 500], [0, 80], [780, 80], [0, 500], [780, 500], [0, 80], [780, 80], [0, 500], [780, 500], [0, 100], [780, 100], [0, 480], [780, 480], [0, 100], [780, 100], [0, 480], [780, 480], [0, 120], [780, 120], [0, 460], [780, 460], [0, 120], [780, 120], [0, 460], [780, 460], [0, 140], [780, 140], [0, 440], [780, 440], [0, 140], [780, 140], [0, 440], [780, 440], [0, 140], [780, 140], [0, 440], [780, 440], [0, 160], [780, 160], [0, 420], [780, 420], [0, 160], [780, 160], [0, 420], [780, 420], [0, 180], [780, 180], [0, 400], [780, 400], [0, 180], [780, 180], [0, 400], [780, 400], [0, 200], [780, 200], [0, 380], [780, 380], [0, 200], [780, 200], [0, 380], [780, 380], [0, 200], [780, 200], [0, 380], [780, 380], [0, 200], [780, 200], [0, 380], [780, 380], [0, 200], [780, 200], [0, 380], [780, 380], [0, 220], [780, 220], [0, 360], [780, 360], [0, 220], [780, 220], [0, 360], [780, 360], [0, 220], [780, 220], [0, 360], [780, 360], [0, 220], [780, 220], [0, 360], [780, 360], [0, 220], [780, 220], [0, 360], [780, 360], [0, 240], [780, 240], [0, 340], [780, 340], [0, 240], [780, 240], [0, 340], [780, 340], [0, 240], [780, 240], [0, 340], [780, 340], [0, 240], [780, 240], [0, 340], [780, 340], [0, 240], [780, 240], [0, 340], [780, 340], [0, 240], [780, 240], [0, 340], [780, 340], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 260], [780, 260], [0, 320], [780, 320], [0, 280], [780, 280], [0, 300], [780, 300], [0, 280], [780, 280], [0, 300], [780, 300], [0, 280], [780, 280], [0, 300], [780, 300], [0, 280], [780, 280], [0, 300], [780, 300], [0, 280], [780, 280], [0, 300], [780, 300], [20, 0], [760, 0], [20, 580], [760, 580], [20, 0], [760, 0], [20, 580], [760, 580], [20, 0], [760, 0], [20, 580], [760, 580], [40, 0], [740, 0], [40, 580], [740, 580], [60, 0], [720, 0], [60, 580], [720, 580], [60, 0], [720, 0], [60, 580], [720, 580], [80, 0], [700, 0], [80, 580], [700, 580], [80, 0], [700, 0], [80, 580], [700, 580], [80, 0], [700, 0], [80, 580], [700, 580], [100, 0], [680, 0], [100, 580], [680, 580], [100, 0], [680, 0], [100, 580], [680, 580], [100, 0], [680, 0], [100, 580], [680, 580], [100, 0], [680, 0], [100, 580], [680, 580], [100, 0], [680, 0], [100, 580], [680, 580], [120, 0], [660, 0], [120, 580], [660, 580], [120, 0], [660, 0], [120, 580], [660, 580], [120, 0], [660, 0], [120, 580], [660, 580], [120, 0], [660, 0], [120, 580], [660, 580], [120, 0], [660, 0], [120, 580], [660, 580], [140, 0], [640, 0], [140, 580], [640, 580], [140, 0], [640, 0], [140, 580], [640, 580], [140, 0], [640, 0], [140, 580], [640, 580], [160, 0], [620, 0], [160, 580], [620, 580], [160, 0], [620, 0], [160, 580], [620, 580], [160, 0], [620, 0], [160, 580], [620, 580], [160, 0], [620, 0], [160, 580], [620, 580], [180, 0], [600, 0], [180, 580], [600, 580], [180, 0], [600, 0], [180, 580], [600, 580], [180, 0], [600, 0], [180, 580], [600, 580], [180, 0], [600, 0], [180, 580], [600, 580], [200, 0], [580, 0], [200, 580], [580, 580], [200, 0], [580, 0], [200, 580], [580, 580], [200, 0], [580, 0], [200, 580], [580, 580], [200, 0], [580, 0], [200, 580], [580, 580], [200, 0], [580, 0], [200, 580], [580, 580], [220, 0], [560, 0], [220, 580], [560, 580], [220, 0], [560, 0], [220, 580], [560, 580], [220, 0], [560, 0], [220, 580], [560, 580], [220, 0], [560, 0], [220, 580], [560, 580], [240, 0], [540, 0], [240, 580], [540, 580], [240, 0], [540, 0], [240, 580], [540, 580], [240, 0], [540, 0], [240, 580], [540, 580], [240, 0], [540, 0], [240, 580], [540, 580], [240, 0], [540, 0], [240, 580], [540, 580], [240, 0], [540, 0], [240, 580], [540, 580], [260, 0], [520, 0], [260, 580], [520, 580], [260, 0], [520, 0], [260, 580], [520, 580], [260, 0], [520, 0], [260, 580], [520, 580], [260, 0], [520, 0], [260, 580], [520, 580], [280, 0], [500, 0], [280, 580], [500, 580], [280, 0], [500, 0], [280, 580], [500, 580], [280, 0], [500, 0], [280, 580], [500, 580], [280, 0], [500, 0], [280, 580], [500, 580], [300, 0], [480, 0], [300, 580], [480, 580], [300, 0], [480, 0], [300, 580], [480, 580], [300, 0], [480, 0], [300, 580], [480, 580], [320, 0], [460, 0], [320, 580], [460, 580], [320, 0], [460, 0], [320, 580], [460, 580], [320, 0], [460, 0], [320, 580], [460, 580], [320, 0], [460, 0], [320, 580], [460, 580], [340, 0], [440, 0], [340, 580], [440, 580], [340, 0], [440, 0], [340, 580], [440, 580], [340, 0], [440, 0], [340, 580], [440, 580], [360, 0], [420, 0], [360, 580], [420, 580], [360, 0], [420, 0], [360, 580], [420, 580], [360, 0], [420, 0], [360, 580], [420, 580], [360, 0], [420, 0], [360, 580], [420, 580], [360, 0], [420, 0], [360, 580], [420, 580], [380, 0], [400, 0], [380, 580], [400, 580], [380, 0], [400, 0], [380, 580], [400, 580], [380, 0], [400, 0], [380, 580], [400, 580], [380, 0], [400, 0], [380, 580], [400, 580], [380, 0], [400, 0], [380, 580], [400, 580], [140, 40], [640, 40], [140, 540], [640, 540], [140, 40], [640, 40], [140, 540], [640, 540], [140, 40], [640, 40], [140, 540], [640, 540], [140, 80], [640, 80], [140, 500], [640, 500], [140, 80], [640, 80], [140, 500], [640, 500], [140, 100], [640, 100], [140, 480], [640, 480], [140, 100], [640, 100], [140, 480], [640, 480], [140, 120], [640, 120], [140, 460], [640, 460], [140, 120], [640, 120], [140, 460], [640, 460], [140, 120], [640, 120], [140, 460], [640, 460], [140, 140], [640, 140], [140, 440], [640, 440], [140, 140], [640, 140], [140, 440], [640, 440], [140, 140], [640, 140], [140, 440], [640, 440], [140, 140], [640, 140], [140, 440], [640, 440], [140, 140], [640, 140], [140, 440], [640, 440], [140, 140], [640, 140], [140, 440], [640, 440], [140, 60], [640, 60], [140, 520], [640, 520], [60, 180], [720, 180], [60, 400], [720, 400], [60, 180], [720, 180], [60, 400], [720, 400], [60, 180], [720, 180], [60, 400], [720, 400], [60, 180], [720, 180], [60, 400], [720, 400], [80, 180], [700, 180], [80, 400], [700, 400], [80, 180], [700, 180], [80, 400], [700, 400], [100, 180], [680, 180], [100, 400], [680, 400], [100, 180], [680, 180], [100, 400], [680, 400], [120, 180], [660, 180], [120, 400], [660, 400], [120, 180], [660, 180], [120, 400], [660, 400], [120, 180], [660, 180], [120, 400], [660, 400], [120, 180], [660, 180], [120, 400], [660, 400], [140, 180], [640, 180], [140, 400], [640, 400], [140, 180], [640, 180], [140, 400], [640, 400], [140, 180], [640, 180], [140, 400], [640, 400], [140, 180], [640, 180], [140, 400], [640, 400], [140, 180], [640, 180], [140, 400], [640, 400], [160, 180], [620, 180], [160, 400], [620, 400], [160, 180], [620, 180], [160, 400], [620, 400], [160, 180], [620, 180], [160, 400], [620, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [180, 180], [600, 180], [180, 400], [600, 400], [200, 160], [580, 160], [200, 420], [580, 420], [200, 180], [580, 180], [200, 400], [580, 400], [220, 160], [560, 160], [220, 420], [560, 420], [160, 260], [620, 260], [160, 320], [620, 320], [160, 260], [620, 260], [160, 320], [620, 320], [180, 260], [600, 260], [180, 320], [600, 320], [180, 260], [600, 260], [180, 320], [600, 320], [180, 260], [600, 260], [180, 320], [600, 320], [180, 260], [600, 260], [180, 320], [600, 320], [180, 260], [600, 260], [180, 320], [600, 320], [200, 260], [580, 260], [200, 320], [580, 320], [200, 260], [580, 260], [200, 320], [580, 320], [200, 260], [580, 260], [200, 320], [580, 320], [200, 260], [580, 260], [200, 320], [580, 320], [200, 260], [580, 260], [200, 320], [580, 320], [220, 260], [560, 260], [220, 320], [560, 320], [220, 260], [560, 260], [220, 320], [560, 320], [220, 260], [560, 260], [220, 320], [560, 320], [220, 260], [560, 260], [220, 320], [560, 320], [220, 260], [560, 260], [220, 320], [560, 320], [220, 260], [560, 260], [220, 320], [560, 320], [220, 260], [560, 260], [220, 320], [560, 320], [240, 260], [540, 260], [240, 320], [540, 320], [240, 260], [540, 260], [240, 320], [540, 320], [240, 260], [540, 260], [240, 320], [540, 320], [240, 260], [540, 260], [240, 320], [540, 320], [240, 260], [540, 260], [240, 320], [540, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [260, 260], [520, 260], [260, 320], [520, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 260], [500, 260], [280, 320], [500, 320], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 240], [500, 240], [280, 340], [500, 340], [280, 220], [500, 220], [280, 360], [500, 360], [280, 220], [500, 220], [280, 360], [500, 360], [280, 220], [500, 220], [280, 360], [500, 360], [280, 200], [500, 200], [280, 380], [500, 380], [280, 200], [500, 200], [280, 380], [500, 380], [280, 200], [500, 200], [280, 380], [500, 380], [280, 200], [500, 200], [280, 380], [500, 380], [280, 200], [500, 200], [280, 380], [500, 380], [280, 200], [500, 200], [280, 380], [500, 380], [280, 180], [500, 180], [280, 400], [500, 400], [280, 160], [500, 160], [280, 420], [500, 420], [280, 160], [500, 160], [280, 420], [500, 420], [280, 160], [500, 160], [280, 420], [500, 420], [280, 160], [500, 160], [280, 420], [500, 420], [280, 160], [500, 160], [280, 420], [500, 420], [280, 160], [500, 160], [280, 420], [500, 420], [280, 160], [500, 160], [280, 420], [500, 420], [280, 160], [500, 160], [280, 420], [500, 420], [280, 140], [500, 140], [280, 440], [500, 440], [280, 140], [500, 140], [280, 440], [500, 440], [280, 140], [500, 140], [280, 440], [500, 440], [280, 140], [500, 140], [280, 440], [500, 440], [280, 140], [500, 140], [280, 440], [500, 440], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 120], [500, 120], [280, 460], [500, 460], [280, 100], [500, 100], [280, 480], [500, 480], [280, 100], [500, 100], [280, 480], [500, 480], [280, 100], [500, 100], [280, 480], [500, 480], [280, 100], [500, 100], [280, 480], [500, 480], [280, 100], [500, 100], [280, 480], [500, 480], [260, 40], [520, 40], [260, 540], [520, 540], [260, 40], [520, 40], [260, 540], [520, 540], [260, 40], [520, 40], [260, 540], [520, 540], [280, 40], [500, 40], [280, 540], [500, 540], [280, 40], [500, 40], [280, 540], [500, 540], [280, 40], [500, 40], [280, 540], [500, 540], [280, 40], [500, 40], [280, 540], [500, 540], [280, 40], [500, 40], [280, 540], [500, 540], [300, 40], [480, 40], [300, 540], [480, 540], [300, 40], [480, 40], [300, 540], [480, 540], [300, 40], [480, 40], [300, 540], [480, 540], [300, 40], [480, 40], [300, 540], [480, 540], [300, 40], [480, 40], [300, 540], [480, 540], [320, 40], [460, 40], [320, 540], [460, 540], [320, 40], [460, 40], [320, 540], [460, 540], [320, 40], [460, 40], [320, 540], [460, 540], [320, 40], [460, 40], [320, 540], [460, 540], [320, 40], [460, 40], [320, 540], [460, 540], [320, 40], [460, 40], [320, 540], [460, 540], [320, 40], [460, 40], [320, 540], [460, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 40], [440, 40], [340, 540], [440, 540], [340, 20], [440, 20], [340, 560], [440, 560], [340, 20], [440, 20], [340, 560], [440, 560], [340, 20], [440, 20], [340, 560], [440, 560], [340, 20], [440, 20], [340, 560], [440, 560], [340, 20], [440, 20], [340, 560], [440, 560], [360, 20], [420, 20], [360, 560], [420, 560], [360, 20], [420, 20], [360, 560], [420, 560], [360, 20], [420, 20], [360, 560], [420, 560], [360, 20], [420, 20], [360, 560], [420, 560], [360, 20], [420, 20], [360, 560], [420, 560], [360, 20], [420, 20], [360, 560], [420, 560], [360, 40], [420, 40], [360, 540], [420, 540], [360, 40], [420, 40], [360, 540], [420, 540], [360, 40], [420, 40], [360, 540], [420, 540], [360, 40], [420, 40], [360, 540], [420, 540], [360, 80], [420, 80], [360, 500], [420, 500], [360, 80], [420, 80], [360, 500], [420, 500], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 100], [420, 100], [360, 480], [420, 480], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 120], [420, 120], [360, 460], [420, 460], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 140], [420, 140], [360, 440], [420, 440], [360, 160], [420, 160], [360, 420], [420, 420], [360, 160], [420, 160], [360, 420], [420, 420], [360, 160], [420, 160], [360, 420], [420, 420], [360, 160], [420, 160], [360, 420], [420, 420], [360, 160], [420, 160], [360, 420], [420, 420], [360, 180], [420, 180], [360, 400], [420, 400], [360, 180], [420, 180], [360, 400], [420, 400], [360, 180], [420, 180], [360, 400], [420, 400], [360, 180], [420, 180], [360, 400], [420, 400], [360, 180], [420, 180], [360, 400], [420, 400], [360, 180], [420, 180], [360, 400], [420, 400], [360, 180], [420, 180], [360, 400], [420, 400], [360, 180], [420, 180], [360, 400], [420, 400], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 200], [420, 200], [360, 380], [420, 380], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 220], [420, 220], [360, 360], [420, 360], [360, 280], [420, 280], [360, 300], [420, 300], [80, 440], [700, 440], [80, 140], [700, 140], [220, 500], [560, 500], [220, 80], [560, 80], [100, 220], [680, 220], [100, 360], [680, 360]]
#создание аксонов
aksons = []
for i in range(AI_tanks_numbers):
    aksons.append([[[114901.09678108597, 256701.06443853854, -198509.20673172854, -100199.11601541594, 294950.6325774383, 157851.064384407, -558499.0325334899], [118500.82964723535, 211380.64871307887, 118591.10897566675, 245771.16153767117, -402578.9090417773, -200818.97193461563, 114151.12978929239], [109641.32354065169, -383809.0088591448, 373950.9872846388, 168611.15878011216, -45318.76052766648, -209048.96686962922, -128188.6974489675], [-201379.036343742, -50069.002916228026, -474449.04483362375, -11329.041012189931, 1740.886563699874, -445438.8567298914, 143150.84789966422], [450570.7864723135, -24478.88251242161, 306570.8328873534, 87450.95073613412, -132848.970039984, -13089.005248449388, -76498.89686834927]], [[-194988.99892166362, -270188.9421874448, -173808.87193981747, 436721.0783426003, -206688.90994578335], [-163408.7443995982, -82319.08323198452, 146520.97884221727, 283210.68661215866, -309738.932650402], [-213378.8598401813, 41920.98356128288, -17158.970947678692, -145758.87761719018, -69648.91188959629], [66151.12463439767, -63369.172270312505, -164579.03576184795, 159800.96161228686, -98118.99171361845], [33240.91589809832, 274080.8713535566, 265680.8516733154, 28440.96001353187, 228830.9680569444]], [[29101.0289292564, 201540.92601314397, 407651.0393772229, 144271.01505925079, -259348.72256280528], [62170.830785068836, -183089.16165159183, 198040.97187431747, 641150.7545074002, -72389.11505217208], [249960.97278251368, 401870.9722720792, -349788.92218145553, -38429.019901457745, 8480.990580087271], [193661.0070546756, 165121.0864650377, -176649.00465357568, 133421.12438125594, 28291.06658907502], [-67099.12481199567, -132229.2194976347, 5651.078990530384, -88518.98934342798, 295741.13585561275]]])
#массив определяющий эволюцию
evolution = []
for i in range(int(AI_tanks_numbers // 10) * 4):
    evolution.append(1000000000 * (1 + i))
for i in range(int(AI_tanks_numbers // 10) * 2):
    evolution.append(1000000 * (1 + i))
for i in range(int(AI_tanks_numbers // 10) * 4):
    evolution.append(1/(10 * (1 + i)))

class AI_Tank():
    def __init__(self, x, y, alpha):
        self.x = x
        self.y = y
        self.angle = alpha
        self.vx = 0
        self.vy = 0
        self.shooting = 0

    def draw(self, i, j):
        x[i][j].append(self.x)
        y[i][j].append(self.y)

    def hittest(self, obj, i, j):
        if (obj.x - self.x) == 0:
            if (obj.y - self.y) >= 0:
                betta = math.pi/2
            else:
                betta = - math.pi / 2
        else:
            betta = math.atan((obj.y - self.y)/(obj.x - self.x))
        if (math.fabs(math.sin(betta - self.angle) * (((obj.y - self.y)**2 + (obj.x - self.x)**2)**(1/2))) <= 8) and (math.fabs(math.cos(betta - self.angle) * (((obj.y - self.y)**2 + (obj.x - self.x)**2)**(1/2))) <= 10):
            been_shooted[i][j] = True
            return True
        else:
            been_shooted[i][j] = False
            return False


    def shot(self, i, j, time):
        if max(shooting[i][j]) + 2 * FPS <= time:
            bullets[i].append(Bullet(self.x + 15 * math.cos(self.angle), self.y + 15 * math.sin(self.angle), self.angle))
            shooting[i][j].append(time)
            self.shooting = 1
        self.shooting = 0

    def rotate_left(self):
        self.angle += -0.1

    def rotate_right(self):
        self.angle += 0.1

    def move_forward(self, i, j):
        self.x += math.cos(self.angle) * tank_speed
        self.y += math.sin(self.angle) * tank_speed
        been_stupid_forward_moving_test = False
        for wall in walls:
            if (wall[0] <= self.x) and (wall[0] + 20 >= self.x) and (wall[1] <= self.y) and (wall[1] + 20 >= self.y):
                self.x += - math.cos(self.angle) * tank_speed
                self.y += - math.sin(self.angle) * tank_speed
                been_stupid_forward_moving_test = True
                break
        been_stupid_forward_moving[i][j].append(been_stupid_forward_moving_test)

    def move_backward(self, i, j):
        self.x += - math.cos(self.angle) * tank_speed
        self.y += - math.sin(self.angle) * tank_speed
        been_stupid_backward_moving_test = False
        for wall in walls:
            if (wall[0] <= self.x) and (wall[0] + 20 >= self.x) and (wall[1] <= self.y) and (wall[1] + 20 >= self.y):
                self.x += math.cos(self.angle) * tank_speed
                self.y += math.sin(self.angle) * tank_speed
                been_stupid_backward_moving_test = True
                break
        been_stupid_backward_moving[i][j].append(been_stupid_backward_moving_test)

    def AI_idea(self, aksons_for_one_tank, obj):
        neurons_1_line = [self.x, self.y, self.angle, obj.x, obj.y, obj.angle, obj.shooting]
        neurons_2_line = []
        neurons_3_line = []
        answer = [[], []]
        for i in range(5):
            part_of_answer = 0
            for j in range(7):
                part_of_answer += aksons_for_one_tank[0][i][j] * neurons_1_line[j]
            part_of_answer = math.cos(part_of_answer)
            neurons_2_line.append(part_of_answer)

        for i in range(5):
            part_of_answer = 0
            for j in range(5):
                part_of_answer += aksons_for_one_tank[1][i][j] * neurons_2_line[j]
            part_of_answer = math.cos(part_of_answer)
            neurons_3_line.append(part_of_answer)

        for i in range(5):
            part_of_answer = 0
            for j in range(5):
                part_of_answer += aksons_for_one_tank[2][i][j] * neurons_3_line[j]
            if math.cos(part_of_answer**2) <= 0:
                part_of_answer = False
            else:
                part_of_answer = True
            answer[0].append(part_of_answer)

        neurons_1_line = [WIDTH - self.x, HEIGHT - self.y, - self.angle, WIDTH - obj.x, HEIGHT - obj.y, - obj.angle, obj.shooting]
        neurons_2_line = []
        neurons_3_line = []
        for i in range(5):
            part_of_answer = 0
            for j in range(7):
                part_of_answer += aksons_for_one_tank[0][i][j] * neurons_1_line[j]
            part_of_answer = math.cos(part_of_answer)
            neurons_2_line.append(part_of_answer)

        for i in range(5):
            part_of_answer = 0
            for j in range(5):
                part_of_answer += aksons_for_one_tank[1][i][j] * neurons_2_line[j]
            part_of_answer = math.cos(part_of_answer)
            neurons_3_line.append(part_of_answer)

        for i in range(5):
            part_of_answer = 0
            for j in range(5):
                part_of_answer += aksons_for_one_tank[2][i][j] * neurons_3_line[j]
            if math.cos(part_of_answer) <= 0:
                part_of_answer = False
            else:
                part_of_answer = True
            answer[1].append(part_of_answer)
        return answer

class Bullet():
    def __init__(self, x, y, alpha):
        self.x = x
        self.y = y
        self.alpha = alpha
        self.vx = math.cos(self.alpha) * bullet_speed
        self.vy = math.sin(self.alpha) * bullet_speed

    def hittest(self):
        Test = False
        for wall in walls:
            if self.x <= wall[0] + 20 and self.x >= wall[0] and self.y <= wall[1] + 20 and self.y >= wall[1]:
                Test = True
        return Test

    def move(self):
        self.x += self.vx
        self.y += self.vy


#Одна эта команда совершает все действия
def draw_and_act_one_frame(aksons):
    # движение ботов танков
    for i in range(AI_tanks_numbers):
        for j in range(2):
            tank_appear = True
            for bullet in bullets[i]:
                if AI_tanks[i][j].hittest(bullet, i, j):
                        AI_tanks[i].remove(AI_tanks[i][j])
                        tank_appear = False
            if tank_appear:
                AI_tanks_idea = AI_tanks[i][j].AI_idea(aksons[(i + j) % AI_tanks_numbers], AI_tanks[i][(j + 1) % 2])[j]
                AI_tanks[i][j].draw(i, j)
                if AI_tanks_idea[0]:
                    AI_tanks[i][j].move_forward(i, j)
                elif AI_tanks_idea[1]:
                    AI_tanks[i][j].move_backward(i, j)
                if AI_tanks_idea[2]:
                    AI_tanks[i][j].rotate_left()
                elif AI_tanks_idea[3]:
                    AI_tanks[i][j].rotate_right()
                if AI_tanks_idea[4]:
                    AI_tanks[i][j].shot(i, j, time)

    #движение пуль
    for i in range(AI_tanks_numbers):
        for bullet in bullets[i]:
            if bullet.hittest():
                bullets[i].remove(bullet)
            bullet.move()

#начальные условия
finished = False
time = 0
generation = 1
best_aksons_score = []
best_aksons = []
r_maximum = 0

#история действий танков
x = []
y = []
shooting = []
been_shooted = []
been_stupid_forward_moving = []
been_stupid_backward_moving = []
AI_tanks = []
for i in range(AI_tanks_numbers):
    x.append([[], []])
    y.append([[], []])
    shooting.append([[0], [0]])
    been_shooted.append([[], []])
    been_stupid_forward_moving.append([[], []])
    been_stupid_backward_moving.append([[], []])
    AI_tanks.append([AI_Tank(WIDTH - 40, HEIGHT - 40, math.pi), AI_Tank(40, 40, 0)])

while not finished:
    if (time  // FPS) <= round_time:
        draw_and_act_one_frame(aksons)
        print(time // FPS)
        print(generation)
    else:
        walking_in_cicle = []
        for i in range(AI_tanks_numbers):
            walking_in_cicle.append([[], []])
        for i in range(AI_tanks_numbers):
            for j in range(2):
                for k in range(len(x[i][j])):
                    unique_x_k = True
                    for p in range(k):
                        if (x[i][j][p] == x[i][j][k]) and (y[i][j][p] == y[i][j][k]):
                            unique_x_k = False
                            break
                    if unique_x_k:
                        walking_in_cicle[i][j].append([k])
                        r_maximum = max(r_maximum, (x[i][j][k] - HEIGHT * ((j+1)%2))**2 +(y[i][j][k] - WIDTH * ((j+1)%2))**2)
                        for p in range(len(x[i][j]) - k - 1):
                            if (x[i][j][k] == x[i][j][k + p + 1]) and (y[i][j][k] == y[i][j][k + p + 1]):
                                walking_in_cicle[i][j][len(walking_in_cicle[i][j]) - 1].append(k + p + 1)

        IQ = []
        for i in range(AI_tanks_numbers):
            IQ.append([0, 0])
        for i in range(AI_tanks_numbers):
            for j in range(2):
                for k in range(len(walking_in_cicle[i][j])):
                    for p in range(len(walking_in_cicle[i][j][k]) - 1):
                        IQ[i][j] += (1 / (walking_in_cicle[i][j][k][p] - walking_in_cicle[i][j][k][p + 1]))

                cicles_maximum_part_of_IQ = - IQ[i][j]

                if been_shooted[i][j]:
                    IQ[i][j] += - cicles_maximum_part_of_IQ - 2

                if been_shooted[i][(j + 1) % 2]:
                    IQ[i][j] += cicles_maximum_part_of_IQ + 2

                for k in range(len(been_stupid_forward_moving[i][j])):
                    if been_stupid_forward_moving[i][j]:
                        IQ[i][j] += - 10000000

                for k in range(len(been_stupid_backward_moving[i][j])):
                    if been_stupid_backward_moving[i][j]:
                        IQ[i][j] += - 10000000
        IQ[i][j] += r_maximum * 100000000
        IQ_test = []
        for i in range(AI_tanks_numbers):
            IQ_test.append(IQ[i][0] + IQ[(i - 1) % AI_tanks_numbers][1])

        IQ_indexes_scale = []
        for i in range(AI_tanks_numbers):
            for j in range(AI_tanks_numbers):
                if (sorted(IQ_test)[AI_tanks_numbers - 1 - i] == IQ_test[j]) and (len(IQ_indexes_scale) < AI_tanks_numbers):
                    if len(IQ_indexes_scale) == 0:
                        IQ_indexes_scale.append(j)
                    else:
                        strong_indexes_append = True
                        for k in range(len(IQ_indexes_scale)):
                            if IQ_indexes_scale[k] == j:
                                strong_indexes_append = False
                        if strong_indexes_append:
                            IQ_indexes_scale.append(j)
        best_aksons.append(aksons[IQ_indexes_scale[0]])
        best_aksons_score.append(IQ_test[IQ_indexes_scale[0]])
        out_file = open('AI_Tanks.txt', 'w')
        out_file.write(str(aksons[IQ_indexes_scale[0]]) + '\n')
        out_file.write(str(generation) + '\n')
        out_file.close()
        for i in range(AI_tanks_numbers):
            for j in range(3):
                if j == 0:
                    for k in range(5):
                        for n in range(7):
                            aksons[IQ_indexes_scale[i]][0][k][n] += rnd.randint(-100, 100) / evolution[i]
                else:
                    for k in range(5):
                        for n in range(5):
                            aksons[IQ_indexes_scale[i]][j][k][n] += rnd.randint(-100, 100) / evolution[i]
        #раз в 10 поколений алгоритм лучшего ИИ за все эти 10 поколений отдается всем
        if generation % 10 == 0:
            best_akson_out_of_10_generations = -1
            best_aksons_score_massive = best_aksons_score
            for i in range(10):
                if (sorted(best_aksons_score_massive)[9] == best_aksons_score[i]) and (best_akson_out_of_10_generations == -1):
                    best_akson_out_of_10_generations = i
            for i in range(10):
                aksons[i] = best_aksons[best_akson_out_of_10_generations]

        x = []
        y = []
        shooting = []
        been_shooted = []
        been_stupid_forward_moving = []
        been_stupid_backward_moving = []
        AI_tanks = []
        for i in range(AI_tanks_numbers):
            x.append([[], []])
            y.append([[], []])
            shooting.append([[0], [0]])
            been_shooted.append([[], []])
            been_stupid_forward_moving.append([[], []])
            been_stupid_backward_moving.append([[], []])
            AI_tanks.append([AI_Tank(WIDTH - 40, HEIGHT - 40, math.pi), AI_Tank(40, 40, 0)])

        time = 0

        generation += 1

    time += 1

print(best_aksons[best_akson_out_of_10_generations])
